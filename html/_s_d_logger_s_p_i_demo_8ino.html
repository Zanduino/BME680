<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>BME680: examples/SDLoggerSPIDemo/SDLoggerSPIDemo.ino File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">BME680
   &#160;<span id="projectnumber">Version 1.0.6</span>
   </div>
   <div id="projectbrief">Arduino Library for the Bosch BME680 Temperature, Humidity, Pressure and Gas sensor</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_s_d_logger_s_p_i_demo_8ino.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">SDLoggerSPIDemo.ino File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="_zanshin___b_m_e680_8h_source.html">Zanshin_BME680.h</a>&quot;</code><br />
<code>#include &lt;SPI.h&gt;</code><br />
<code>#include &lt;SD.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structreading.html">reading</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2da02f9fe2a7e6ae7a9dcbea796297c2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a2da02f9fe2a7e6ae7a9dcbea796297c2">normalMode</a> ()</td></tr>
<tr class="separator:a2da02f9fe2a7e6ae7a9dcbea796297c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5a4849cfbb24159b7e11e0f722e37b5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#ae5a4849cfbb24159b7e11e0f722e37b5">accurateMode</a> ()</td></tr>
<tr class="separator:ae5a4849cfbb24159b7e11e0f722e37b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4fc01d736fe50cf5b977f755b675f11d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a4fc01d736fe50cf5b977f755b675f11d">setup</a> ()</td></tr>
<tr class="separator:a4fc01d736fe50cf5b977f755b675f11d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe461d27b9c48d5921c00d521181f12f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#afe461d27b9c48d5921c00d521181f12f">loop</a> ()</td></tr>
<tr class="separator:afe461d27b9c48d5921c00d521181f12f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a3faf34f5504e22c1877fdddd905c7340"><td class="memItemLeft" align="right" valign="top"><a id="a3faf34f5504e22c1877fdddd905c7340"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a3faf34f5504e22c1877fdddd905c7340">BME_680_SPI_CS_PIN</a> = SS</td></tr>
<tr class="memdesc:a3faf34f5504e22c1877fdddd905c7340"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use the standard SS pin for the BME680. <br /></td></tr>
<tr class="separator:a3faf34f5504e22c1877fdddd905c7340"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a85ca07df7dc31b49c31f1c94b26ad25c"><td class="memItemLeft" align="right" valign="top"><a id="a85ca07df7dc31b49c31f1c94b26ad25c"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a85ca07df7dc31b49c31f1c94b26ad25c">SD_CARD_SPI_CS_PIN</a> = 24</td></tr>
<tr class="memdesc:a85ca07df7dc31b49c31f1c94b26ad25c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Use Pin A6/D4 for the SD Card. <br /></td></tr>
<tr class="separator:a85ca07df7dc31b49c31f1c94b26ad25c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc8430dea1bce949f10d9708742cca34"><td class="memItemLeft" align="right" valign="top"><a id="adc8430dea1bce949f10d9708742cca34"></a>
const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#adc8430dea1bce949f10d9708742cca34">SERIAL_SPEED</a> = 115200</td></tr>
<tr class="memdesc:adc8430dea1bce949f10d9708742cca34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the baud rate for Serial I/O. <br /></td></tr>
<tr class="separator:adc8430dea1bce949f10d9708742cca34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4594c2761e7ec9ee5143db14c27c16c"><td class="memItemLeft" align="right" valign="top"><a id="aa4594c2761e7ec9ee5143db14c27c16c"></a>
const uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#aa4594c2761e7ec9ee5143db14c27c16c">NUMBER_READINGS</a> = 10</td></tr>
<tr class="memdesc:aa4594c2761e7ec9ee5143db14c27c16c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of readings to average. <br /></td></tr>
<tr class="separator:aa4594c2761e7ec9ee5143db14c27c16c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af77629bb2c4a458631ff0ebf39bb0d72"><td class="memItemLeft" align="right" valign="top"><a id="af77629bb2c4a458631ff0ebf39bb0d72"></a>
const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#af77629bb2c4a458631ff0ebf39bb0d72">LONG_DELAY</a> = 10000</td></tr>
<tr class="memdesc:af77629bb2c4a458631ff0ebf39bb0d72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Long delay in milliseconds - 10 seconds. <br /></td></tr>
<tr class="separator:af77629bb2c4a458631ff0ebf39bb0d72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a971e4524a4d294d016af280f14ae5ab4"><td class="memItemLeft" align="right" valign="top"><a id="a971e4524a4d294d016af280f14ae5ab4"></a>
const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a971e4524a4d294d016af280f14ae5ab4">SHORT_DELAY</a> = 1000</td></tr>
<tr class="memdesc:a971e4524a4d294d016af280f14ae5ab4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Long delay in milliseconds - 1 second. <br /></td></tr>
<tr class="separator:a971e4524a4d294d016af280f14ae5ab4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac570dadda5df349348f53376e3fbddb3"><td class="memItemLeft" align="right" valign="top"><a id="ac570dadda5df349348f53376e3fbddb3"></a>
const uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#ac570dadda5df349348f53376e3fbddb3">FAST_MODE_DURATION</a> = 60000</td></tr>
<tr class="memdesc:ac570dadda5df349348f53376e3fbddb3"><td class="mdescLeft">&#160;</td><td class="mdescRight">How long to run detailed measurements after trigger. <br /></td></tr>
<tr class="separator:ac570dadda5df349348f53376e3fbddb3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3759f27c4ea5a76e7b642613fc366bf5"><td class="memItemLeft" align="right" valign="top"><a id="a3759f27c4ea5a76e7b642613fc366bf5"></a>
const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a3759f27c4ea5a76e7b642613fc366bf5">FILE_NAME</a> = &quot;BME_680.csv&quot;</td></tr>
<tr class="memdesc:a3759f27c4ea5a76e7b642613fc366bf5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Filename on SD-Card. <br /></td></tr>
<tr class="separator:a3759f27c4ea5a76e7b642613fc366bf5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7107930b12cdaaa16dc1c5d8730bf528"><td class="memItemLeft" align="right" valign="top"><a id="a7107930b12cdaaa16dc1c5d8730bf528"></a>
const uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a7107930b12cdaaa16dc1c5d8730bf528">TEMPERATURE_TRIP</a> = 100</td></tr>
<tr class="memdesc:a7107930b12cdaaa16dc1c5d8730bf528"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger if delta is more than this deci-degrees. <br /></td></tr>
<tr class="separator:a7107930b12cdaaa16dc1c5d8730bf528"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada280a5922caef362c34838b73a51dd3"><td class="memItemLeft" align="right" valign="top"><a id="ada280a5922caef362c34838b73a51dd3"></a>
const uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#ada280a5922caef362c34838b73a51dd3">PRESSURE_TRIP</a> = 100</td></tr>
<tr class="memdesc:ada280a5922caef362c34838b73a51dd3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger if delta is more than this Pascal. <br /></td></tr>
<tr class="separator:ada280a5922caef362c34838b73a51dd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70caf7518825c0488eff08e1010c97e2"><td class="memItemLeft" align="right" valign="top"><a id="a70caf7518825c0488eff08e1010c97e2"></a>
const uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a70caf7518825c0488eff08e1010c97e2">HUMIDITY_TRIP</a> = 1000</td></tr>
<tr class="memdesc:a70caf7518825c0488eff08e1010c97e2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger if delta is more than this milli-percent. <br /></td></tr>
<tr class="separator:a70caf7518825c0488eff08e1010c97e2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5063630ccead4138f04d3c1bc67c9a39"><td class="memItemLeft" align="right" valign="top"><a id="a5063630ccead4138f04d3c1bc67c9a39"></a>
<a class="el" href="class_b_m_e680___class.html">BME680_Class</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a5063630ccead4138f04d3c1bc67c9a39">BME680</a></td></tr>
<tr class="memdesc:a5063630ccead4138f04d3c1bc67c9a39"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create an instance of the BME680 class. <br /></td></tr>
<tr class="separator:a5063630ccead4138f04d3c1bc67c9a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a38e756be89c7fc3aa589a64f8d8eb2ad"><td class="memItemLeft" align="right" valign="top"><a id="a38e756be89c7fc3aa589a64f8d8eb2ad"></a>
File&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a38e756be89c7fc3aa589a64f8d8eb2ad">dataFile</a></td></tr>
<tr class="memdesc:a38e756be89c7fc3aa589a64f8d8eb2ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class for a SD-Card file. <br /></td></tr>
<tr class="separator:a38e756be89c7fc3aa589a64f8d8eb2ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a266732d9c228f9bac150e7554734d112"><td class="memItemLeft" align="right" valign="top"><a id="a266732d9c228f9bac150e7554734d112"></a>
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a266732d9c228f9bac150e7554734d112">idx</a> = 0</td></tr>
<tr class="memdesc:a266732d9c228f9bac150e7554734d112"><td class="mdescLeft">&#160;</td><td class="mdescRight">Index into "data" structure. <br /></td></tr>
<tr class="separator:a266732d9c228f9bac150e7554734d112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a89199aa2db6f8b251f165107a2398da9"><td class="memItemLeft" align="right" valign="top"><a id="a89199aa2db6f8b251f165107a2398da9"></a>
uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a89199aa2db6f8b251f165107a2398da9">loopCounter</a> = 0</td></tr>
<tr class="memdesc:a89199aa2db6f8b251f165107a2398da9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loop counter for displaying iterations. <br /></td></tr>
<tr class="separator:a89199aa2db6f8b251f165107a2398da9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0f5d5220fcc34c4e729582126bf7112"><td class="memItemLeft" align="right" valign="top"><a id="ad0f5d5220fcc34c4e729582126bf7112"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#ad0f5d5220fcc34c4e729582126bf7112">fastModeEndMillis</a> = 0</td></tr>
<tr class="memdesc:ad0f5d5220fcc34c4e729582126bf7112"><td class="mdescLeft">&#160;</td><td class="mdescRight">Millis value when fast mode stops. <br /></td></tr>
<tr class="separator:ad0f5d5220fcc34c4e729582126bf7112"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af470b04858a297daf94ab9524b08fcf2"><td class="memItemLeft" align="right" valign="top"><a id="af470b04858a297daf94ab9524b08fcf2"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#af470b04858a297daf94ab9524b08fcf2">fast_mode_end</a> = 0</td></tr>
<tr class="memdesc:af470b04858a297daf94ab9524b08fcf2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds the millis() value when fast_mode ends. <br /></td></tr>
<tr class="separator:af470b04858a297daf94ab9524b08fcf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3f179e8973dc029502aca9ab656cf00"><td class="memItemLeft" align="right" valign="top"><a id="af3f179e8973dc029502aca9ab656cf00"></a>
<a class="el" href="structreading.html">reading</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#af3f179e8973dc029502aca9ab656cf00">data</a> [<a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#aa4594c2761e7ec9ee5143db14c27c16c">NUMBER_READINGS</a>]</td></tr>
<tr class="memdesc:af3f179e8973dc029502aca9ab656cf00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Structure to hold accumulated measurements. <br /></td></tr>
<tr class="separator:af3f179e8973dc029502aca9ab656cf00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9f63a0a93c62f0248938579f0e1835f3"><td class="memItemLeft" align="right" valign="top"><a id="a9f63a0a93c62f0248938579f0e1835f3"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a9f63a0a93c62f0248938579f0e1835f3">unused_gas</a></td></tr>
<tr class="memdesc:a9f63a0a93c62f0248938579f0e1835f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unused variable to hold (nonexistant) gas measurements. <br /></td></tr>
<tr class="separator:a9f63a0a93c62f0248938579f0e1835f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4156971984155fe16c9f4158f41d58d5"><td class="memItemLeft" align="right" valign="top"><a id="a4156971984155fe16c9f4158f41d58d5"></a>
char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a4156971984155fe16c9f4158f41d58d5">buf</a> [32]</td></tr>
<tr class="memdesc:a4156971984155fe16c9f4158f41d58d5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Text buffer for sprintf() function. <br /></td></tr>
<tr class="separator:a4156971984155fe16c9f4158f41d58d5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a325c704a38de182bedbd7693692fa20e"><td class="memItemLeft" align="right" valign="top"><a id="a325c704a38de182bedbd7693692fa20e"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a325c704a38de182bedbd7693692fa20e">avg_temperature</a></td></tr>
<tr class="memdesc:a325c704a38de182bedbd7693692fa20e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds computed average over NUMBER_READINGS. <br /></td></tr>
<tr class="separator:a325c704a38de182bedbd7693692fa20e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7493ad34b71d5bc3f4d6da2ce76ca9a"><td class="memItemLeft" align="right" valign="top"><a id="ae7493ad34b71d5bc3f4d6da2ce76ca9a"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#ae7493ad34b71d5bc3f4d6da2ce76ca9a">avg_humidity</a></td></tr>
<tr class="memdesc:ae7493ad34b71d5bc3f4d6da2ce76ca9a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds computed average over NUMBER_READINGS. <br /></td></tr>
<tr class="separator:ae7493ad34b71d5bc3f4d6da2ce76ca9a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a67acfc3f4453439da95a7bef3f19bf0e"><td class="memItemLeft" align="right" valign="top"><a id="a67acfc3f4453439da95a7bef3f19bf0e"></a>
int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a67acfc3f4453439da95a7bef3f19bf0e">avg_pressure</a></td></tr>
<tr class="memdesc:a67acfc3f4453439da95a7bef3f19bf0e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Holds computed average over NUMBER_READINGS. <br /></td></tr>
<tr class="separator:a67acfc3f4453439da95a7bef3f19bf0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ddd6fc09e8c164356571846adcc7fc8"><td class="memItemLeft" align="right" valign="top"><a id="a9ddd6fc09e8c164356571846adcc7fc8"></a>
uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#a9ddd6fc09e8c164356571846adcc7fc8">delayTime</a> = <a class="el" href="_s_d_logger_s_p_i_demo_8ino.html#af77629bb2c4a458631ff0ebf39bb0d72">LONG_DELAY</a></td></tr>
<tr class="memdesc:a9ddd6fc09e8c164356571846adcc7fc8"><td class="mdescLeft">&#160;</td><td class="mdescRight">The number of milliseconds to pause between measurements. <br /></td></tr>
<tr class="separator:a9ddd6fc09e8c164356571846adcc7fc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h1><a class="anchor" id="SDLoggerSPIDemo_intro_section"></a>
Description</h1>
<p>Example program for using SPI to set and read the Bosch BME680 sensor and log readings to an SD-Card. The sensor measures temperature, pressure and humidity and is described at <a href="https://www.bosch-sensortec.com/bst/products/all_products/BME680">https://www.bosch-sensortec.com/bst/products/all_products/BME680</a>. The datasheet is available from Bosch at <a href="https://ae-bst.resource.bosch.com/media/_tech/media/datasheets/BST-BME680_DS001-11.pdf">https://ae-bst.resource.bosch.com/media/_tech/media/datasheets/BST-BME680_DS001-11.pdf</a> <br />
<br />
 The most recent version of the BME680 library is available at <a href="https://github.com/SV-Zanshin/BME680">https://github.com/SV-Zanshin/BME680</a> and the documentation of the library as well as example programs are described in the project's wiki pages located at <a href="https://github.com/SV-Zanshin/BME680/wiki">https://github.com/SV-Zanshin/BME680/wiki</a>. <br />
<br />
 The BME680 is an extremely small physical package that is so tiny as to be impossible to solder at home, hence it will be used as part of a third-party breakout board. There are several such boards available at this time, for example <br />
</p><table class="doxtable">
<tr>
<th>Company </th><th>Link  </th></tr>
<tr>
<td>Sparkfun </td><td><a href="https://www.sparkfun.com/products/14570">https://www.sparkfun.com/products/14570</a> </td></tr>
<tr>
<td>BlueDot </td><td><a href="https://www.bluedot.space/sensor-boards/bme680/">https://www.bluedot.space/sensor-boards/bme680/</a> </td></tr>
<tr>
<td>Adafruit </td><td><a href="https://learn.adafruit.com/adafruit-BME680-humidity-barometric-pressure-temperature-sensor-breakout">https://learn.adafruit.com/adafruit-BME680-humidity-barometric-pressure-temperature-sensor-breakout</a> <br />
<br />
</td></tr>
</table>
<p>Bosch supplies sample software that runs on various platforms, including the Arduino family; this can be downloaed at <a href="https://github.com/BoschSensortec/BSEC-Arduino-library">https://github.com/BoschSensortec/BSEC-Arduino-library</a> . This software is part of the Bosch "BSEC" (Bosch Sensortec Environmental Cluster) framework and somewhat bulky and unwieldy for typical Arduino applications, hence the choice to make a more compact and rather less abstract library.</p>
<p>This example program was designed as a simple data logger which defaults to measurements taken every 10 seconds. Once either the temperature, pressure or humidity changes at a rate above that set in the constants TEMPERATURE_TRIP, PRESSURE_TRIP or HUMIDITY_TRIP then the measurement rate is sped up to read every second and to read more accurately. This was intended as a data logger inside a refrigerator or freezer, where most of the time there are constant values but when the door is opened or the defrosting cycle kicks in then readings need to be done more often.</p>
<p>This example program initializes the BME680 to use SPI for communications. The library does not using floating point numbers to save on memory space and computation time. The values for Temperature, Pressure and Humidity are returned in deci-units, e.g. a Temperature reading of "2731" means "27.31" degrees Celsius. The display in the example program uses floating point for demonstration purposes only. Note that the temperature reading is generally higher than the ambient temperature due to die and PCB temperature and self-heating of the element.<br />
<br />
 The pressure reading needs to be adjusted for altitude to get the adjusted pressure reading. There are numerous sources on the internet for formulae converting from standard sea-level pressure to altitude, see the data sheet for the BME180 on page 16 of <a href="http://www.adafruit.com/datasheets/BST-BMP180-DS000-09.pdf">http://www.adafruit.com/datasheets/BST-BMP180-DS000-09.pdf</a>. Rather than put a floating-point function in the library which may not be used but which would use space, an example altitude computation function has been added to this example program to show how it might be done.</p>
<h1><a class="anchor" id="SDLoggerSPIDemolicense"></a>
License</h1>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. You should have received a copy of the GNU General Public License along with this program. If not, see <a href="http://www.gnu.org/licenses/">http://www.gnu.org/licenses/</a>.</p>
<h1><a class="anchor" id="SDLoggerSPIDemoauthor"></a>
Author</h1>
<p>Written by <a href="https://github.com/SV-Zanshin">https://github.com/SV-Zanshin</a></p>
<h1><a class="anchor" id="SDLoggerSPIDemoversions"></a>
Changelog</h1>
<table class="doxtable">
<tr>
<th>Version </th><th>Date </th><th>Developer </th><th>Comments  </th></tr>
<tr>
<td>1.0.0 </td><td>2020-05-27 </td><td><a href="https://github.com/SV-Zanshin">https://github.com/SV-Zanshin</a> </td><td>Completed and tested </td></tr>
<tr>
<td>1.0.0b </td><td>2020-05-22 </td><td><a href="https://github.com/SV-Zanshin">https://github.com/SV-Zanshin</a> </td><td>Cloned from original SPIDemo program and modified </td></tr>
</table>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="ae5a4849cfbb24159b7e11e0f722e37b5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5a4849cfbb24159b7e11e0f722e37b5">&#9670;&nbsp;</a></span>accurateMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void accurateMode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called to set the BME680 configuration values to those for accurate readings</p>
<p>The configuration parameters are set to get more accurate measurements at the price of both additional time and energy. </p><dl class="section return"><dt>Returns</dt><dd>void</dd></dl>

</div>
</div>
<a id="afe461d27b9c48d5921c00d521181f12f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe461d27b9c48d5921c00d521181f12f">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Arduino method for the main program loop</p>
<p>This is the main program for the Arduino IDE, it is an infinite loop and keeps on repeating. The "sprintf()" function is to pretty-print the values, since floating point is not supported on the Arduino, split the values into those before and those after the decimal point. </p><dl class="section return"><dt>Returns</dt><dd>void</dd></dl>

</div>
</div>
<a id="a2da02f9fe2a7e6ae7a9dcbea796297c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2da02f9fe2a7e6ae7a9dcbea796297c2">&#9670;&nbsp;</a></span>normalMode()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void normalMode </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Called to set the BME680 configuration values to those for normal (less accurate) readings</p>
<p>The configuration parameters are set to use minimal time (and energy) at the price of accuracy. </p><dl class="section return"><dt>Returns</dt><dd>void</dd></dl>

</div>
</div>
<a id="a4fc01d736fe50cf5b977f755b675f11d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4fc01d736fe50cf5b977f755b675f11d">&#9670;&nbsp;</a></span>setup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void setup </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Arduino method called once at startup to initialize the system</p>
<p>This is an Arduino IDE method which is called first upon boot or restart. It is only called one time and then control goes to the main "loop()" method, from which control never returns </p><dl class="section return"><dt>Returns</dt><dd>void</dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_d28a4824dc47e487b107a5db32ef43c4.html">examples</a></li><li class="navelem"><a class="el" href="dir_4d5d06c4166f4b46641b2f47cf749f7c.html">SDLoggerSPIDemo</a></li><li class="navelem"><a class="el" href="_s_d_logger_s_p_i_demo_8ino.html">SDLoggerSPIDemo.ino</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
